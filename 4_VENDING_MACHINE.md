# Java ìíŒê¸°

TDDì™€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í•™ìŠµì„ ìœ„í•œ ê°„ë‹¨í•œ ì½˜ì†” ê¸°ë°˜ì˜ ìíŒê¸°(Vending Machine) ì‹œë®¬ë ˆì´ì…˜ì…ë‹ˆë‹¤.
'ìƒíƒœ(State)'ë¥¼ ê°€ì§„ ê°ì²´ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì„ ì—°ìŠµí•˜ëŠ” ë° ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤.

## ğŸ“š í•™ìŠµ ëª©í‘œ
- ìƒíƒœë¥¼ ê°€ì§„ ê°ì²´ì˜ í–‰ìœ„ í…ŒìŠ¤íŠ¸
- ê°ì²´ì˜ ì—­í• ê³¼ ì±…ì„ ë¶„ë¦¬ (SRP)
- ì˜ˆì™¸ ìƒí™© ì²˜ë¦¬ ë° í…ŒìŠ¤íŠ¸
- ê·¸ë¦¬ë”” ì•Œê³ ë¦¬ì¦˜ ì ìš© (ì‹¬í™”)

---

## ğŸ¯ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 1. ìíŒê¸° ì´ˆê¸°í™”
- ìíŒê¸°ëŠ” ì‹œì‘ ì‹œ ìƒí’ˆ ëª©ë¡ê³¼ ê° ìƒí’ˆì˜ ì¬ê³ ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•œë‹¤.
- ìƒí’ˆì€ ì´ë¦„, ê°€ê²©, ì¬ê³  ì •ë³´ë¥¼ ê°€ì§„ë‹¤.

### 2. ëˆ íˆ¬ì…
- ì‚¬ìš©ìëŠ” ìíŒê¸°ì— ëˆì„ íˆ¬ì…í•  ìˆ˜ ìˆë‹¤.
- íˆ¬ì…ëœ ê¸ˆì•¡ì€ ìíŒê¸° ë‚´ì— ëˆ„ì ëœë‹¤.

### 3. ìƒí’ˆ êµ¬ë§¤
- ì‚¬ìš©ìëŠ” êµ¬ë§¤í•  ìƒí’ˆì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤.
- **êµ¬ë§¤ ë¶ˆê°€ ì¡°ê±´ (ì˜ˆì™¸ ë°œìƒ):**
    - íˆ¬ì…í•œ ê¸ˆì•¡ì´ ì„ íƒí•œ ìƒí’ˆì˜ ê°€ê²©ë³´ë‹¤ ì ì„ ê²½ìš°
    - ì„ íƒí•œ ìƒí’ˆì˜ ì¬ê³ ê°€ ì—†ì„ ê²½ìš°
    - **ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìƒí’ˆì„ ì„ íƒí•œ ê²½ìš°**
- **êµ¬ë§¤ ì„±ê³µ:**
    - íˆ¬ì…í•œ ê¸ˆì•¡ì—ì„œ ìƒí’ˆ ê°€ê²©ë§Œí¼ ì°¨ê°í•œë‹¤.
    - ìƒí’ˆì˜ ì¬ê³ ë¥¼ 1 ê°ì†Œì‹œí‚¨ë‹¤.

### 4. ì”ëˆ ë°˜í™˜
- ì‚¬ìš©ìê°€ 'ì”ëˆ ë°˜í™˜'ì„ ìš”ì²­í•˜ë©´, í˜„ì¬ íˆ¬ì…ë˜ì–´ ìˆëŠ” ê¸ˆì•¡ì„ ëª¨ë‘ ë°˜í™˜í•œë‹¤.
- ë°˜í™˜ í›„, ìíŒê¸°ì— íˆ¬ì…ëœ ê¸ˆì•¡ì€ 0ì´ ëœë‹¤.

---

## ğŸ–¥ï¸ ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ

```
===== ìíŒê¸° ìƒí’ˆ =====
ì½œë¼(1000ì›) - 5ê°œ
ì‚¬ì´ë‹¤(1200ì›) - 3ê°œ
ë¬¼(800ì›) - 10ê°œ
=====================
íˆ¬ì…í•œ ê¸ˆì•¡: 0ì›

ëˆì„ íˆ¬ì…í•˜ì„¸ìš”.
> 2000

íˆ¬ì…í•œ ê¸ˆì•¡: 2000ì›
êµ¬ë§¤í•  ìƒí’ˆì„ ì„ íƒí•˜ì„¸ìš”. (ì¢…ë£Œ: 'ì¢…ë£Œ', ì”ëˆ ë°˜í™˜: 'ë°˜í™˜')
> ì½œë¼

'ì½œë¼'ê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤.
íˆ¬ì…í•œ ê¸ˆì•¡: 1000ì›
êµ¬ë§¤í•  ìƒí’ˆì„ ì„ íƒí•˜ì„¸ìš”. (ì¢…ë£Œ: 'ì¢…ë£Œ', ì”ëˆ ë°˜í™˜: 'ë°˜í™˜')
> ì‚¬ì´ë‹¤

[ERROR] ê¸ˆì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. í˜„ì¬ íˆ¬ì…ëœ ê¸ˆì•¡ì€ 1000ì› ì…ë‹ˆë‹¤.
íˆ¬ì…í•œ ê¸ˆì•¡: 1000ì›
êµ¬ë§¤í•  ìƒí’ˆì„ ì„ íƒí•˜ì„¸ìš”. (ì¢…ë£Œ: 'ì¢…ë£Œ', ì”ëˆ ë°˜í™˜: 'ë°˜í™˜')
> ë°˜í™˜

ì”ëˆ 1000ì›ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
```

---

## ğŸš€ ì‹¬í™” ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (ì„ íƒ)

### 5. ê±°ìŠ¤ë¦„ëˆ ë™ì „ ì¬ê³  ê´€ë¦¬
- ìíŒê¸°ê°€ ë³´ìœ í•˜ê³  ìˆëŠ” ë™ì „(ì˜ˆ: 500ì›, 100ì›, 50ì›, 10ì›)ì˜ ê°œìˆ˜ë¥¼ ê´€ë¦¬í•œë‹¤.
- ì”ëˆ ë°˜í™˜ ì‹œ, ë‹¨ìˆœíˆ ì´ì•¡ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë³´ìœ í•œ ë™ì „ë“¤ë¡œ ì¡°í•©í•˜ì—¬ ë°˜í™˜í•œë‹¤.
- ë§Œì•½ ì •í™•í•œ ê±°ìŠ¤ë¦„ëˆì„ ì¤„ ë™ì „ì´ ë¶€ì¡±í•˜ë‹¤ë©´, "ì”ëˆ ë¶€ì¡±" ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ê³  êµ¬ë§¤ë¥¼ ì·¨ì†Œì‹œí‚¨ë‹¤.
- (íŒíŠ¸: ê·¸ë¦¬ë”” ì•Œê³ ë¦¬ì¦˜(Greedy Algorithm)ì„ ì ìš©í•˜ì—¬ ê°€ì¥ í° ë‹¨ìœ„ì˜ ë™ì „ë¶€í„° ê±°ìŠ¬ëŸ¬ì£¼ëŠ” ë¡œì§ì„ êµ¬í˜„í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)

### 6. ë™ì‹œì„± ì œì–´ (ë™ì‹œ êµ¬ë§¤ ë°©ì§€)
- ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ë§ˆì§€ë§‰ ë‚¨ì€ ìƒí’ˆì„ êµ¬ë§¤í•˜ë ¤ëŠ” ìƒí™©ì„ ê³ ë ¤í•©ë‹ˆë‹¤.
- ì˜¤ì§ í•˜ë‚˜ì˜ êµ¬ë§¤ ìš”ì²­ë§Œ ì„±ê³µí•´ì•¼ í•˜ë©°, ìƒí’ˆì˜ ì¬ê³ ê°€ ìŒìˆ˜(-)ê°€ ë˜ëŠ” ì¼ì´ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤.
- (íŒíŠ¸: `synchronized` í‚¤ì›Œë“œ ë“±ì„ ì ìš©í•˜ì—¬ ë™ì‹œì„±ì„ ì œì–´í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„í•˜ê³ , í•´ë‹¹ ë¡œì§ì´ ì˜ë„ëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ ê²€ì¦í•©ë‹ˆë‹¤.)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì˜ˆì‹œ

```java
@Test
void íˆ¬ì…í•œ_ê¸ˆì•¡ì´_ë¶€ì¡±í•˜ë©´_êµ¬ë§¤í• _ìˆ˜_ì—†ë‹¤() {
    VendingMachine machine = new VendingMachine();
    machine.addItem(new Item("ì½œë¼", 1000, 5));
    machine.insertMoney(500);

    assertThatThrownBy(() -> machine.purchase("ì½œë¼"))
        .isInstanceOf(IllegalStateException.class)
        .hasMessageContaining("ê¸ˆì•¡ì´ ë¶€ì¡±");
}

@Test
void ì¬ê³ ê°€_ì—†ìœ¼ë©´_êµ¬ë§¤í• _ìˆ˜_ì—†ë‹¤() {
    VendingMachine machine = new VendingMachine();
    machine.addItem(new Item("ì½œë¼", 1000, 0));
    machine.insertMoney(2000);

    assertThatThrownBy(() -> machine.purchase("ì½œë¼"))
        .isInstanceOf(IllegalStateException.class)
        .hasMessageContaining("ì¬ê³ ");
}

@Test
void ì¡´ì¬í•˜ì§€_ì•ŠëŠ”_ìƒí’ˆì„_ì„ íƒí•˜ë©´_ì˜ˆì™¸ê°€_ë°œìƒí•œë‹¤() {
    VendingMachine machine = new VendingMachine();
    machine.insertMoney(1000);

    assertThatThrownBy(() -> machine.purchase("í™˜íƒ€"))
        .isInstanceOf(IllegalArgumentException.class)
        .hasMessageContaining("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìƒí’ˆ");
}

@Test
void êµ¬ë§¤_ì„±ê³µ_ì‹œ_ê¸ˆì•¡ê³¼_ì¬ê³ ê°€_ì°¨ê°ëœë‹¤() {
    VendingMachine machine = new VendingMachine();
    machine.addItem(new Item("ì½œë¼", 1000, 5));
    machine.insertMoney(2000);

    machine.purchase("ì½œë¼");

    assertThat(machine.getBalance()).isEqualTo(1000);
    assertThat(machine.getItemStock("ì½œë¼")).isEqualTo(4);
}
```

---

## âœ… í”„ë¡œê·¸ë˜ë° ìš”êµ¬ì‚¬í•­
- ëª¨ë“  ê¸°ëŠ¥ì€ TDD(Test-Driven Development) ë°©ì‹ìœ¼ë¡œ ê°œë°œí•œë‹¤.
- ìíŒê¸°ì˜ 'ìƒíƒœ'(íˆ¬ì…ëœ ëˆ, ìƒí’ˆ ì¬ê³ )ê°€ í–‰ë™(ëˆ íˆ¬ì…, ìƒí’ˆ êµ¬ë§¤)ì— ë”°ë¼ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ë¥¼ ì¤‘ì ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•œë‹¤.
- ê°ì²´ì˜ ì—­í• ê³¼ ì±…ì„ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•œë‹¤. (ì˜ˆ: `VendingMachine`, `Item`, `Money`)
- í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” **JUnit 5**ì™€ **AssertJ**ë¥¼ ì‚¬ìš©í•œë‹¤.
